(this["webpackJsonpionic-happy-shipping-app"]=this["webpackJsonpionic-happy-shipping-app"]||[]).push([[42],{225:function(e,t,r){"use strict";r.r(t),r.d(t,"FilePickerWeb",(function(){return l}));var n=r(5),a=r.n(n),i=r(31),u=r(13),c=r(9),s=r(11),o=r(14),p=r(15),l=function(e){Object(o.a)(r,e);var t=Object(p.a)(r);function r(){var e;return Object(c.a)(this,r),(e=t.apply(this,arguments)).ERROR_PICK_FILE_CANCELED="pickFiles canceled.",e}return Object(s.a)(r,[{key:"pickFiles",value:function(){var e=Object(u.a)(a.a.mark((function e(t){var r,n,u,c,s,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.openFilePicker(t);case 2:if(r=e.sent){e.next=5;break}throw new Error(this.ERROR_PICK_FILE_CANCELED);case 5:n={files:[]},u=Object(i.a)(r),e.prev=7,u.s();case 9:if((c=u.n()).done){e.next=19;break}if(s=c.value,o={path:void 0,name:this.getNameFromUrl(s),mimeType:this.getMimeTypeFromUrl(s),size:this.getSizeFromUrl(s),blob:s},!1===(null===t||void 0===t?void 0:t.readData)){e.next=16;break}return e.next=15,this.getDataFromFile(s);case 15:o.data=e.sent;case 16:n.files.push(o);case 17:e.next=9;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(7),u.e(e.t0);case 24:return e.prev=24,u.f(),e.finish(24);case 27:return e.abrupt("return",n);case 28:case"end":return e.stop()}}),e,this,[[7,21,24,27]])})));return function(t){return e.apply(this,arguments)}}()},{key:"openFilePicker",value:function(){var e=Object(u.a)(a.a.mark((function e(t){var r,n,i,c=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(null===(r=null===t||void 0===t?void 0:t.types)||void 0===r?void 0:r.join(","))||"",i=!!(null===t||void 0===t?void 0:t.multiple),e.abrupt("return",new Promise((function(e){var t=!1,r=document.createElement("input");r.type="file",r.accept=n,r.multiple=i,r.addEventListener("change",(function(){t=!0;var n=Array.from(r.files||[]);e(n)}),{once:!0}),window.addEventListener("focus",Object(u.a)(a.a.mark((function r(){return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,c.wait(1e3);case 2:if(!t){r.next=4;break}return r.abrupt("return");case 4:e(void 0);case 5:case"end":return r.stop()}}),r)}))),{once:!0}),r.click()})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getDataFromFile",value:function(){var e=Object(u.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){var n=new FileReader;n.readAsDataURL(t),n.onload=function(){var t=("string"===typeof n.result?n.result:"").split("base64,")[1]||"";e(t)},n.onerror=function(e){r(e)}})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getNameFromUrl",value:function(e){return e.name}},{key:"getMimeTypeFromUrl",value:function(e){return e.type}},{key:"getSizeFromUrl",value:function(e){return e.size}},{key:"wait",value:function(){var e=Object(u.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){return setTimeout(e,t)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),r}(r(47).a)}}]);
//# sourceMappingURL=42.da6625cf.chunk.js.map